{"version":3,"sources":["webpack:///../node_modules/q-components/components/search/trendingSearches/index.js","webpack:///../node_modules/q-components/components/search/recentSearches/index.js","webpack:///../node_modules/q-components/components/search/searchPopup/index.js"],"names":["props","fetchTrendingSearches","sessionStorage","trendingSearches","JSON","parse","getItem","length","setState","data","getCurrentCityId","axios","post","headers","then","response","forEach","searchItem","index","push","Object","keys","attr","reduce","str","currentValue","setItem","stringify","handleClick","event","value","target","innerText","onClick","searchCallback","state","componentDidMount","render","map","fetchRecentSearches","localStorage","recentSearches","split","handleRecentSearchClick","handleClearClick","e","onClearClick","className","regex","axiosInstance","create","baseURL","timeout","accept","cookies","processText","text","strippedText","replace","parts","RegExp","part","i","toLowerCase","fontWeight","defaultSearchHandler","hostname","window","location","cityId","get","subdom","searchUrl","res","status","results","err","catch","updateSearchSuggestions","searchSuggestions","handleSearch","onSearchCallback","handleSearchRedirect","preventDefault","pushToRecentSearches","onSearchSubmit","redirectToSearchResults","onRecentSearchClick","handleTrendingSearchClick","onTrendingSearchClick","indexOf","splice","pop","unshift","getSearchSuggestions","suggestions","v","id","url","keyworddata","subcatdata","context","show","placeholder","closePopup","showTrendingSearches","showRecentSearches"],"mappings":"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","file":"1.chunk.efb2d.js","sourcesContent":["import { h, Component } from 'preact';\nimport axios from 'axios';\n\nimport List from 'q-mdc/elements/material-list';\nimport ListItem from 'q-mdc/elements/material-list-item';\n\nimport { Trending } from '../../icons/searchIcons';\nimport styles from '../suggester.scss';\nimport {\n\tHEADER_API_HOST,\n\tTRENDING_SEARCH_API_PATH,\n\tTRENDING_SEARCHES_KEY\n} from '../../../helpers/constants';\nimport {\n\tgetCurrentCityId\n} from '../../../helpers/';\n\nexport default class TrendingSearches extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\ttrendingSearches: []\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchTrendingSearches();\n\t}\n\n\tfetchTrendingSearches = () => {\n\t\t// fetch trending searches from APi\n\t\t// https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS for more info on CORS preflight headers\n\t\t// Can use URLSearchParams but there is only value to send, and URLSearchParams has some browser dependencies and we can even use encodeURIComponent\n\t\t// Or we can configure our server to send Accept: * in CORS preflight request\n\t\tif (sessionStorage) {\n\t\t\tconst trendingSearches = JSON.parse(sessionStorage.getItem(TRENDING_SEARCHES_KEY));\n\t\t\tif (trendingSearches && trendingSearches.length > 0) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttrendingSearches\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconst data = `cityId=${getCurrentCityId()}`;\n\t\taxios.post(`${HEADER_API_HOST}/${TRENDING_SEARCH_API_PATH}`, data, {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tconst trendingSearches = [];\n\t\t\tif (response.data) {\n\t\t\t\tresponse.data.forEach((searchItem, index) => {\n\t\t\t\t\ttrendingSearches.push(Object.keys(searchItem.attr).reduce((str, currentValue) => (str + ' ' + searchItem.attr[currentValue]), ''));\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (sessionStorage) {\n\t\t\t\tsessionStorage.setItem(TRENDING_SEARCHES_KEY, JSON.stringify(trendingSearches));\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\ttrendingSearches\n\t\t\t});\n\t\t});\n\t}\n\n\thandleClick = (event) => {\n\t\tconst value = event.target.innerText;\n\t\tif (this.props.onClick && typeof this.props.onClick === 'function') {\n\t\t\tthis.props.onClick(value, event);\n\t\t}\n\t\telse {\n\t\t\tconst { searchCallback } = this.props;\n\t\t\tsearchCallback(value);\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { trendingSearches } = this.state;\n\t\tif (trendingSearches.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (<div>\n\t\t\t<h5>\n\t\t\t\tTrending Searches\n\t\t\t</h5>\n\t\t\t<List>\n\t\t\t\t{trendingSearches.map((searchItem) => (<ListItem>\n\t\t\t\t\t<Trending class=\"search__suggester--icon\" />\n\t\t\t\t\t<p onClick={this.handleClick}>{searchItem}</p>\n\t\t\t\t</ListItem>))}\n\t\t\t</List>\n\t\t</div>);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/q-components/components/search/trendingSearches/index.js","import { h, Component } from 'preact';\n\nimport List from 'q-mdc/elements/material-list';\nimport ListItem from 'q-mdc/elements/material-list-item';\n\nimport { Recent } from '../../icons/searchIcons';\nimport { RECENT_SEARCHES_KEY } from '../../../helpers/constants';\n\nimport styles from '../suggester.scss';\n\nexport default class RecentSearches extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\trecentSearches: []\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchRecentSearches();\n\t}\n\n\tfetchRecentSearches = () => {\n\t\tif (localStorage) {\n\t\t\tconst recentSearches = localStorage.getItem(RECENT_SEARCHES_KEY);\n\t\t\tif (recentSearches) {\n\t\t\t\tthis.setState({\n\t\t\t\t\trecentSearches: recentSearches.split(',')\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleRecentSearchClick = (event) => {\n\t\tconst value = event.target.innerText;\n\t\tif (this.props.onClick && typeof this.props.onClick === 'function') {\n\t\t\tthis.props.onClick(value, event);\n\t\t}\n\t\telse {\n\t\t\tconst { searchCallback } = this.props;\n\t\t\tif (searchCallback && typeof searchCallback === 'function') {\n\t\t\t\tsearchCallback(value);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleClearClick = (e) => {\n\t\tif (this.props.onClearClick && typeof this.props.onClearClick === 'function') {\n\t\t\tthis.props.onClearClick(e);\n\t\t}\n\t\telse {\n\t\t\tlocalStorage.setItem(RECENT_SEARCHES_KEY, '');\n\t\t\tthis.setState({\n\t\t\t\trecentSearches: []\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { recentSearches } = this.state;\n\t\tconst { className } = this.props;\n\t\tif (recentSearches.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (<div className={className}>\n\t\t\t<h5>\n\t\t\t\tRecent Searches\n\t\t\t\t<a onClick={this.handleClearClick}>clear</a>\n\t\t\t</h5>\n\t\t\t<List>\n\t\t\t\t{recentSearches.map((searchItem) => (<ListItem>\n\t\t\t\t\t<Recent class=\"search__suggester--icon\" />\n\t\t\t\t\t<p onClick={this.handleRecentSearchClick}>{searchItem}</p>\n\t\t\t\t</ListItem>))}\n\t\t\t</List>\n\t\t</div>);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ../node_modules/q-components/components/search/recentSearches/index.js","import { h, Component } from 'preact';\n\nimport Popup from '../../pageLayer';\nimport Toolbar from 'q-mdc/elements/material-toolbar';\nimport ToolbarRow from 'q-mdc/elements/material-toolbar-row';\nimport ToolbarSection from 'q-mdc/elements/material-toolbar-section';\nimport ToolbarTitle from 'q-mdc/elements/material-toolbar-title';\nimport List from 'q-mdc/elements/material-list';\nimport ListItem from 'q-mdc/elements/material-list-item';\n\nimport { Back } from '../../icons/headerIcons';\nimport {  Search as SearchIcon } from '../../icons/searchIcons';\nimport TrendingSearches from '../trendingSearches';\nimport RecentSearches from '../recentSearches';\nimport { RECENT_SEARCHES_KEY } from '../../../helpers/constants';\nimport axios from 'axios';\nimport Cookies from 'universal-cookie';\n\nconst regex = /(<([^>]+)>)/ig;\n\nconst axiosInstance = axios.create({\n\tbaseURL: 'https://www.quikr.com/',\n\ttimeout: 1000,\n\theaders: {\n\t\taccept: 'application/json, text/javascript, */*; q=0.01',\n\t\t'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',\n\t\t'cache-control': 'no-cache',\n\t\t'postman-token': '05ebf28a-dc1b-1d07-bc81-2b0402e3f3b5'\n\t}\n});\n\nconst cookies = new Cookies();\n\nclass searchPopup  extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tvalue: null,\n\t\t\tresults: [],\n\t\t\terr: null,\n\t\t\tsearchSuggestions: null\n\t\t};\n\t}\n    \n\tprocessText = (text) => {\n\t\tconst strippedText = text.replace(regex, '');\n\t\tconst { value } = this.state;\n\t\tconst parts = strippedText.split(new RegExp(`(${value})`,'gi'));\n\t\treturn (<p>{\n\t\t\tparts.map((part, i) => (part.toLowerCase() === value.toLowerCase() ? <span key={i} style={{ fontWeight: 'bold' }}>{part}</span> : part ))\n\t\t}</p>);\n\t}\n\n\tdefaultSearchHandler = (event) => {\n\t\tlet value;\n\t\tif (event) {\n\t\t\tvalue = event.target.value;\n\t\t}\n\t\telse {\n\t\t\t// unreliable\n\t\t\tvalue = this.state.value;\n\t\t}\n\n\t\tlet hostname = 'www.quikr.com';\n\t\tif ( window && window.location && window.location.hostname ) {\n\t\t\thostname = window.location.hostname;\n\t\t}\n\n\t\tlet cityId = cookies.get('prefer_city_id') || null;\n\t\tlet subdom = cookies.get('new_prefer_city') || 'app';\n\n\t\tconst searchUrl = cityId ? `//${hostname}/common?aj=1&for=searchautosuggest&data=${value}&subdom=${subdom}&rand=1515663417214&cityId=${cityId}` : `//${hostname}/common?aj=1&for=searchautosuggest&data=${value}&subdom=${subdom}&rand=1515663417214`;\n\t\t\n\t\taxiosInstance.get(searchUrl)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tresults: res.data,\n\t\t\t\t\t\terr: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tresults: [],\n\t\t\t\t\t\terr: 'Something went wrong'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch((err) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\terr,\n\t\t\t\t\tresults: []\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tupdateSearchSuggestions = (searchSuggestions) => {\n\t\tthis.setState({\n\t\t\tsearchSuggestions\n\t\t});\n\t}\n\n\thandleSearch = (event) => {\n\t\tconst { onSearchCallback } = this.props;\n\n\t\tconst { target: { value } } = event;\n\t\tthis.setState({\n\t\t\tvalue\n\t\t});\n\n\t\t// if onSearchCallback is in props and its a method then call that method\n\t\tif (onSearchCallback && typeof(onSearchCallback) === 'function') {\n\t\t\t// If they still want to call the defaultSearch handler, it is passed as second arguement (if we want to fire an event before fetching search results)\n\t\t\tonSearchCallback(event, this.updateSearchSuggestions, this.defaultSearchHandler);\n\t\t}\n\t\telse {\n\t\t\t// call the default search handler\n\t\t\tthis.defaultSearchHandler(event);\n\t\t}\n\t}\n\n\n\t// On change is triggered when the input loses focus, so moving it to form onSubmit\n\thandleSearchRedirect = (event) => {\n\t\tevent.preventDefault();\n\t\t\n\t\tconst { value } = this.state;\n\t\tif (value && value !== '') {\n\t\t\tthis.pushToRecentSearches(value);\n\t\t\t\n\t\t\tconst { onSearchSubmit } = this.props;\n\t\t\tif (onSearchSubmit && typeof(onSearchSubmit) === 'function') {\n\t\t\t\tonSearchSubmit(value, this.redirectToSearchResults);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.redirectToSearchResults(value);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleRecentSearchClick = (value, event) => {\n\t\tthis.pushToRecentSearches(value);\n\t\tif (this.props.onRecentSearchClick && typeof(this.props.onRecentSearchClick) === 'function') {\n\t\t\tthis.props.onRecentSearchClick(value, event);\n\t\t}\n\t\telse {\n\t\t\tthis.redirectToSearchResults(value);\n\t\t}\n\t}\n\n\thandleTrendingSearchClick = (value, event) => {\n\t\tthis.pushToRecentSearches(value);\n\t\tif (this.props.onTrendingSearchClick && typeof(this.props.onTrendingSearchClick) === 'function') {\n\t\t\tthis.props.onTrendingSearchClick(value, event);\n\t\t}\n\t\telse {\n\t\t\tthis.redirectToSearchResults(value);\n\t\t}\n\t}\n\n\tpushToRecentSearches = (value) => {\n\t\t// Add the search to recent searches\n\t\tif (localStorage) {\n\t\t\tlet recentSearches = localStorage.getItem(RECENT_SEARCHES_KEY);\n\t\t\tif (recentSearches) {\n\t\t\t\trecentSearches = recentSearches.split(',');\n\t\t\t}\n\t\t\telse {\n\t\t\t\trecentSearches = [];\n\t\t\t}\n\t\t\t// find the current value in recent searches if it exists delete it or else if the length >= 3 then delete the last element\n\t\t\tconst index = recentSearches.indexOf(value);\n\t\t\tif (index >= 0) {\n\t\t\t\trecentSearches.splice(index, 1);\n\t\t\t}\n\t\t\telse if (recentSearches.length >= 3) {\n\t\t\t\trecentSearches.pop();\n\t\t\t}\n\t\t\t// push the current value at the end\n\t\t\trecentSearches.unshift(value);\n\t\t\tlocalStorage.setItem(RECENT_SEARCHES_KEY, recentSearches);\n\t\t}\n\t}\n\n\tredirectToSearchResults = (value) => {\n\t\t\n\t\t// redirect to search results page\n\t\tlet hostname = 'www.quikr.com';\n\t\tif ( window && window.location && window.location.hostname ) {\n\t\t\thostname = window.location.hostname;\n\t\t}\n\n\t\twindow.location = `http://${hostname}/${value}-all/${value}/x23?sx=true`;\n\t}\n\n\t// Subcomponent getters\n\tgetSearchSuggestions = () => {\n\t\tconst { searchSuggestions } = this.props;\n\t\tconst { results, err, searchSuggestions: suggestions } = this.state;\n\t\tif (suggestions) {\n\t\t\treturn suggestions;\n\t\t}\n\t\t// Should be removed when everyone uses callback to update suggestions\n\t\tif (searchSuggestions) {\n\t\t\treturn searchSuggestions;\n\t\t}\n\t\tif (err || results.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (<div class=\"toolbar-search__suggestions\">\n\t\t\t<h5>Suggestions</h5>\n\t\t\t<List>\n\t\t\t\t{results.map((v) =>\n\t\t\t\t\t(<ListItem key={v.id} link href={v.url}>\n\t\t\t\t\t\t<SearchIcon class=\"search__suggester--icon\" />\n\t\t\t\t\t\t<p>{this.processText(v.keyworddata[0])}\n\t\t\t\t\t\t\t<label>{`in ${v.subcatdata}`}</label>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\n\t\t\t\t\t</ListItem>\n\n\t\t\t\t\t))}\n\t\t\t</List>\n\t\t</div>);\n\t}\n\n\trender ({ show, placeholder,handleSearch, closePopup, showTrendingSearches = true, showRecentSearches = true },{ value, results, err },context) {\n\t\treturn (<Popup show={show} >\n\t\t\t<Toolbar>\n\t\t\t\t<ToolbarRow>\n\t\t\t\t\t<ToolbarSection start>\n\t\t\t\t\t\t<a class=\"mdc-toolbar__icon--menu\" onClick={closePopup}>\n\t\t\t\t\t\t\t<Back class=\"mdc-toolbar__icons\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ToolbarTitle>\n\t\t\t\t\t\t\t<div class=\"toolbar-search\">\n\t\t\t\t\t\t\t\t<form onSubmit={this.handleSearchRedirect}>\n\t\t\t\t\t\t\t\t\t<input class=\"toolbar-search__field\" value={value} autoFocus type=\"search\" placeholder={placeholder} onInput={this.handleSearch} />\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ToolbarTitle>\n\n\t\t\t\t\t</ToolbarSection>\n\n\t\t\t\t</ToolbarRow>\n\t\t\t</Toolbar>\n\t\t\t<div class=\"search__suggester\">\n\t\t\t\t{this.getSearchSuggestions()}\n\t\t\t\t{(!value || value === '') && <div>\n\t\t\t\t\t{showRecentSearches && <RecentSearches onClick={this.handleRecentSearchClick} searchCallback={this.redirectToSearchResults} />}\n\t\t\t\t\t{showTrendingSearches && <TrendingSearches onClick={this.handleTrendingSearchClick} searchCallback={this.redirectToSearchResults} />}\n\t\t\t\t</div>}\n\t\t\t\t{/* results.length === 0 && <Suggester />  */}\n\t\t\t</div>\n\t\t</Popup>);\n\t}\n}\n        \nexport default searchPopup;\n        \n\n\n// WEBPACK FOOTER //\n// ../node_modules/q-components/components/search/searchPopup/index.js"],"sourceRoot":""}