webpackJsonp([1],{"/CLT":function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=n("KM04"),p=n("uoES"),f=n("wlTu"),d=n("IpDW"),b=n("SaRr"),S=n("cZ+C"),g=n("QO9c"),w=n("i30l"),j=n("Bkqj"),O=n("CkQa"),y=n("dZBD"),C=n.n(y),v=(n("T6tC"),n("LH+s")),k=n("xuq0"),m=function(e){function t(t){var n=r(this,e.call(this,t));return n.fetchTrendingSearches=function(){if(sessionStorage){var e=JSON.parse(sessionStorage.getItem(v.k));if(e&&e.length>0)return void n.setState({trendingSearches:e})}var t="cityId="+Object(k.b)();C.a.post(v.i+"/"+v.l,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var t=[];e.data&&e.data.forEach(function(e){t.push(Object.keys(e.attr).reduce(function(t,n){return t+" "+e.attr[n]},""))}),sessionStorage&&sessionStorage.setItem(v.k,JSON.stringify(t)),n.setState({trendingSearches:t})})},n.handleClick=function(e){var t=e.target.innerText;if(n.props.onClick&&"function"==typeof n.props.onClick)n.props.onClick(t,e);else{(0,n.props.searchCallback)(t)}},n.state={trendingSearches:[]},n}return o(t,e),t.prototype.componentDidMount=function(){this.fetchTrendingSearches()},t.prototype.render=function(){var e=this,t=this.state.trendingSearches;return 0===t.length?null:Object(h.h)("div",null,Object(h.h)("h5",null,"Trending Searches"),Object(h.h)(g.a,null,t.map(function(t){return Object(h.h)(w.a,null,Object(h.h)(O.c,{class:"search__suggester--icon"}),Object(h.h)("p",{onClick:e.handleClick},t))})))},t}(h.Component),_=m,T=function(e){function t(n){c(this,t);var r=a(this,e.call(this,n));return r.fetchRecentSearches=function(){if(localStorage){var e=localStorage.getItem(v.j);e&&r.setState({recentSearches:e.split(",")})}},r.handleRecentSearchClick=function(e){var t=e.target.innerText;if(r.props.onClick&&"function"==typeof r.props.onClick)r.props.onClick(t,e);else{var n=r.props.searchCallback;n&&"function"==typeof n&&n(t)}},r.handleClearClick=function(e){r.props.onClearClick&&"function"==typeof r.props.onClearClick?r.props.onClearClick(e):(localStorage.setItem(v.j,""),r.setState({recentSearches:[]}))},r.state={recentSearches:[]},r}return s(t,e),t.prototype.componentDidMount=function(){this.fetchRecentSearches()},t.prototype.render=function(){var e=this,t=this.state.recentSearches,n=this.props.className;return 0===t.length?null:Object(h.h)("div",{className:n},Object(h.h)("h5",null,"Recent Searches",Object(h.h)("a",{onClick:this.handleClearClick},"clear")),Object(h.h)(g.a,null,t.map(function(t){return Object(h.h)(w.a,null,Object(h.h)(O.a,{class:"search__suggester--icon"}),Object(h.h)("p",{onClick:e.handleRecentSearchClick},t))})))},t}(h.Component),R=T,x=n("Dev8"),E=n.n(x),I=/(<([^>]+)>)/gi,q=C.a.create({baseURL:"https://www.quikr.com/",timeout:1e3,headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-GB,en-US;q=0.9,en;q=0.8","cache-control":"no-cache","postman-token":"05ebf28a-dc1b-1d07-bc81-2b0402e3f3b5"}}),P=new E.a,D=function(e){function t(n){i(this,t);var r=l(this,e.call(this,n));return r.processText=function(e){var t=e.replace(I,""),n=r.state.value,o=t.split(new RegExp("("+n+")","gi"));return Object(h.h)("p",null,o.map(function(e,t){return e.toLowerCase()===n.toLowerCase()?Object(h.h)("span",{key:t,style:{fontWeight:"bold"}},e):e}))},r.defaultSearchHandler=function(e){var t=void 0;t=e?e.target.value:r.state.value;var n="www.quikr.com";window&&window.location&&window.location.hostname&&(n=window.location.hostname);var o=P.get("prefer_city_id")||null,c=P.get("new_prefer_city")||"app";q.get(o?"//"+n+"/common?aj=1&for=searchautosuggest&data="+t+"&subdom="+c+"&rand=1515663417214&cityId="+o:"//"+n+"/common?aj=1&for=searchautosuggest&data="+t+"&subdom="+c+"&rand=1515663417214").then(function(e){r.setState(200===e.status?{results:e.data,err:null}:{results:[],err:"Something went wrong"})}).catch(function(e){r.setState({err:e,results:[]})})},r.updateSearchSuggestions=function(e){r.setState({searchSuggestions:e})},r.handleSearch=function(e){var t=r.props.onSearchCallback;r.setState({value:e.target.value}),t&&"function"==typeof t?t(e,r.updateSearchSuggestions,r.defaultSearchHandler):r.defaultSearchHandler(e)},r.handleSearchRedirect=function(e){e.preventDefault();var t=r.state.value;if(t&&""!==t){r.pushToRecentSearches(t);var n=r.props.onSearchSubmit;n&&"function"==typeof n?n(t,r.redirectToSearchResults):r.redirectToSearchResults(t)}},r.handleRecentSearchClick=function(e,t){r.pushToRecentSearches(e),r.props.onRecentSearchClick&&"function"==typeof r.props.onRecentSearchClick?r.props.onRecentSearchClick(e,t):r.redirectToSearchResults(e)},r.handleTrendingSearchClick=function(e,t){r.pushToRecentSearches(e),r.props.onTrendingSearchClick&&"function"==typeof r.props.onTrendingSearchClick?r.props.onTrendingSearchClick(e,t):r.redirectToSearchResults(e)},r.pushToRecentSearches=function(e){if(localStorage){var t=localStorage.getItem(v.j);t=t?t.split(","):[];var n=t.indexOf(e);n>=0?t.splice(n,1):t.length>=3&&t.pop(),t.unshift(e),localStorage.setItem(v.j,t)}},r.redirectToSearchResults=function(e){var t="www.quikr.com";window&&window.location&&window.location.hostname&&(t=window.location.hostname),window.location="http://"+t+"/"+e+"-all/"+e+"/x23?sx=true"},r.getSearchSuggestions=function(){var e=r.props.searchSuggestions,t=r.state,n=t.results,o=t.err,c=t.searchSuggestions;return c||(e||(o||0===n.length?null:Object(h.h)("div",{class:"toolbar-search__suggestions"},Object(h.h)("h5",null,"Suggestions"),Object(h.h)(g.a,null,n.map(function(e){return Object(h.h)(w.a,{key:e.id,link:!0,href:e.url},Object(h.h)(O.b,{class:"search__suggester--icon"}),Object(h.h)("p",null,r.processText(e.keyworddata[0]),Object(h.h)("label",null,"in "+e.subcatdata)))})))))},r.state={value:null,results:[],err:null,searchSuggestions:null},r}return u(t,e),t.prototype.render=function(e,t){var n=e.show,r=e.placeholder,o=e.closePopup,c=e.showTrendingSearches,a=void 0===c||c,s=e.showRecentSearches,i=void 0===s||s,l=t.value;return Object(h.h)(p.a,{show:n},Object(h.h)(f.a,null,Object(h.h)(d.a,null,Object(h.h)(b.a,{start:!0},Object(h.h)("a",{class:"mdc-toolbar__icon--menu",onClick:o},Object(h.h)(j.b,{class:"mdc-toolbar__icons"})),Object(h.h)(S.a,null,Object(h.h)("div",{class:"toolbar-search"},Object(h.h)("form",{onSubmit:this.handleSearchRedirect},Object(h.h)("input",{class:"toolbar-search__field",value:l,autoFocus:!0,type:"search",placeholder:r,onInput:this.handleSearch}))))))),Object(h.h)("div",{class:"search__suggester"},this.getSearchSuggestions(),(!l||""===l)&&Object(h.h)("div",null,i&&Object(h.h)(R,{onClick:this.handleRecentSearchClick,searchCallback:this.redirectToSearchResults}),a&&Object(h.h)(_,{onClick:this.handleTrendingSearchClick,searchCallback:this.redirectToSearchResults}))))},t}(h.Component);t.default=D}});
//# sourceMappingURL=1.chunk.c5ac0.js.map